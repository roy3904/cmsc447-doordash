<!DOCTYPE html>

<html>
    <head>
        <title>The Coffee Shoppe | Gritdash</title>
        <link rel="stylesheet" href="homepage-style.css">
        <script src="https://kit.fontawesome.com/5d92ce3398.js" crossorigin="anonymous"></script>
            <script src="scripts/cart-common.js"></script>
    </head>
    <body>
        <main>
            <header class="nav-bar">
                <div class="header-container">
                    <img class="nav-logo" src="images/gritdash-logo-1.png">
                    <a class="nav-link" href="homepage.html">Home</a>
                    <a class="nav-link">Worker Portal</a>
                    <a class="nav-link">Admin Portal</a>
                </div>
                                                <a href="cart.html" aria-label="Cart" style="color:inherit;text-decoration:none;">
                                                    <i class="fa-solid fa-cart-shopping badge" style="font-size:22px;">
                                                        <span id="cart-count" class="badge-count">0</span>
                                                    </i>
                                                </a>
            </header>
    
            <p class="food-title">The Coffee Shoppe</p>
    
            <div class="food-container">
                <div class="food-item">
                    <img class="food-img" src="images/scrambled-eggs.jpg">
                    <div class="food-description">
                        <p class="food-name">Scrambled Eggs</p>
                        <p class="food-cost">$4.99</p>
                    </div>
                    <div class="add-to-cart">
                            <button id="add-eggs" class="food-button">Add to Cart</button>
                        <p class="added-text js-added-text-eggs">Added To Cart!</p>
                    </div>
                     
                </div>
            </div>
        </main>

        <footer>
            <img class="footer-logo" src="images/gritdash-logo-1.png">
        </footer>
        <script>
            let addToCartClicked = false;
            function showAddedToCart(foodId){
                if(addToCartClicked === true){
                    clearTimeout(timeoudId);
                } 
                else{
                    addToCartClicked = true;
                }

                timeoutId = setTimeout(() => {
                    document.querySelector(`.js-added-text-${foodId}`).classList.remove('added-text-selected');
                    addToCartClicked = false;
                }, 2000);

                document.querySelector(`.js-added-text-${foodId}`).classList.add('added-text-selected');
            }

                        document.querySelector('#add-eggs').addEventListener('click', () => {
                                showAddedToCart('eggs');
                                // Add to cart via shared script
                                if(typeof addToCart === 'function'){
                                    addToCart({ restaurant: 'The Coffee Shoppe', name: 'Scrambled Eggs', price: 4.99, quantity: 1 });
                                } else {
                                    // fallback: naive localStorage push
                                    const CART_KEY = 'cart';
                                    try{ const cart = JSON.parse(localStorage.getItem(CART_KEY) || '[]'); cart.push({ restaurant: 'The Coffee Shoppe', name: 'Scrambled Eggs', price:4.99, quantity:1 }); localStorage.setItem(CART_KEY, JSON.stringify(cart)); window.dispatchEvent(new Event('cart_updated')); }catch(e){}
                                }
                        });
        </script>
    </body>
</html>